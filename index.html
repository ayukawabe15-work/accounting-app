<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>会計アプリ</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="app-header">
    <div class="container head-inner">
      <h1 class="logo">会計アプリ</h1>
      <div class="auth">
        <button id="loginButton" class="btn btn-outline">Googleにログイン</button>
        <span id="loginStatus" class="muted">未ログイン</span>
      </div>
    </div>
  </header>

  <main class="container">

    <!-- タブ -->
    <nav class="tabs">
      <button class="tab active" data-tab="input">入力</button>
      <button class="tab" data-tab="list">一覧</button>
      <button class="tab" data-tab="aggregate">集計</button>
    </nav>

    <!-- 入力 -->
    <section id="input" class="tab-content active">
      <form id="entryForm" class="card">
        <div class="grid">

          <div class="field">
            <label for="date">日付</label>
            <input type="date" id="date" class="control" required />
          </div>

          <div class="field">
            <label for="type">区分</label>
            <select id="type" class="control">
              <option value="支出">支出</option>
              <option value="収入">収入</option>
            </select>
          </div>

          <div class="field">
            <label for="category">使い道</label>
            <input type="text" id="category" class="control" placeholder="例：スクリプト購入 / サーバー代" />
          </div>

          <div class="field">
            <label for="partner">取引先</label>
            <input type="text" id="partner" class="control" placeholder="例：Tebex / VibeGAMES / FANBOX など" />
          </div>

          <div class="field">
            <label for="payment">支払方法</label>
            <select id="payment" class="control">
              <option value="未選択">未選択</option>
              <option value="クレジットカード">クレジットカード</option>
              <option value="銀行振込">銀行振込</option>
              <option value="PayPal">PayPal</option>
              <option value="現金">現金</option>
            </select>
          </div>

          <div class="field">
            <label for="currency">通貨</label>
            <select id="currency" class="control">
              <option value="JPY">JPY（日本円）</option>
              <option value="USD">USD（米ドル）</option>
              <option value="EUR">EUR（ユーロ）</option>
              <option value="GBP">GBP（ポンド）</option>
            </select>
          </div>

          <div class="field">
            <label for="foreignAmount">外貨金額</label>
            <input type="number" step="0.01" id="foreignAmount" class="control" placeholder="例: 12.34" />
          </div>

          <div class="field">
            <label for="rate">為替レート</label>
            <div class="inline">
              <input type="text" id="rate" class="control" placeholder="1USD=???JPY" />
              <button type="button" id="autoRateBtn" class="btn btn-soft">自動取得</button>
            </div>
            <p class="hint">外貨金額 × レート ＝ 円換算。レート未入力なら金額(円)を直接入力できます。</p>
          </div>

          <div class="field">
            <label for="amount">金額（円）</label>
            <input type="number" step="0.01" id="amount" class="control" placeholder="自動換算または直接入力" />
          </div>

          <div class="field">
            <label for="memo">メモ</label>
            <input type="text" id="memo" class="control" placeholder="例：MLO/車MOD/サーバー更新など" />
          </div>

          <div class="field full">
            <label for="fileInput">ファイル添付（画像/PDF）</label>
            <input type="file" id="fileInput" class="control" />
          </div>

        </div>

        <div class="actions">
          <button type="submit" class="btn btn-primary">保存（Driveへ自動アップロード）</button>
        </div>
      </form>
    </section>

    <!-- 一覧 -->
    <section id="list" class="tab-content">
      <div class="card">
        <div class="table-wrap">
          <table id="recordsTable" class="table">
            <thead>
              <tr>
                <th>日付</th>
                <th>区分</th>
                <th>使い道</th>
                <th>取引先</th>
                <th>支払方法</th>
                <th>通貨</th>
                <th>外貨金額</th>
                <th>レート</th>
                <th>金額(円)</th>
                <th>メモ</th>
                <th>ファイル</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- 集計 -->
    <section id="aggregate" class="tab-content">
      <div class="card">
        <h2 class="card-title">月次集計</h2>
        <div id="monthlySummary" class="summary"></div>
        <h2 class="card-title mt">年次集計</h2>
        <div id="yearlySummary" class="summary"></div>
      </div>
    </section>

  </main>

  <!-- Google API -->
  <script async defer src="https://apis.google.com/js/api.js" onload="gapiLoaded()"></script>
  <script async defer src="https://accounts.google.com/gsi/client" onload="gisLoaded()"></script>
  <script src="script.js"></script>
</body>
</html>
