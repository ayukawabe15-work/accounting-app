<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>会計アプリ</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>会計アプリ</h1>
    <button id="loginButton">Googleにログイン</button>
    <span id="loginStatus">未ログイン</span>
  </header>

  <main>
    <div class="tabs">
      <button class="tab active" data-tab="input">入力</button>
      <button class="tab" data-tab="list">一覧</button>
      <button class="tab" data-tab="aggregate">集計</button>
    </div>

    <!-- 入力フォーム -->
    <div id="input" class="tab-content active">
      <form id="entryForm">
        <div class="form-row">
          <label>日付 <input type="date" id="date" required></label>
          <label>区分
            <select id="type">
              <option value="支出">支出</option>
              <option value="収入">収入</option>
            </select>
          </label>
          <label>使い道 <input type="text" id="category"></label>
          <label>取引先 <input type="text" id="partner"></label>
        </div>

        <div class="form-row">
          <label>支払方法
            <select id="payment">
              <option value="未選択">未選択</option>
              <option value="クレジットカード">クレジットカード</option>
              <option value="銀行振込">銀行振込</option>
              <option value="PayPal">PayPal</option>
              <option value="PayPal">PayPay</option>
              <option value="現金">現金</option>
            </select>
          </label>

          <label>通貨
            <select id="currency">
              <option value="JPY">JPY（日本円）</option>
              <option value="USD">USD（米ドル）</option>
              <option value="EUR">EUR（ユーロ）</option>
              <option value="GBP">GBP（UKポンド）</option>
              <option value="lb">lb（ポンド）</option>
            </select>
          </label>

          <label>外貨金額 <input type="number" id="foreignAmount" step="0.01"></label>

          <label>為替レート 
            <input type="text" id="rate" placeholder="1USD=???JPY">
            <button type="button" id="autoRateBtn">自動取得</button>
          </label>

          <label>金額（円） <input type="number" id="amount" step="0.01"></label>
        </div>

        <div class="form-row">
          <label>メモ <input type="text" id="memo"></label>
          <label>ファイル添付 <input type="file" id="fileInput"></label>
        </div>

        <button type="submit">保存（Driveへ自動アップロード）</button>
      </form>
    </div>

    <!-- 一覧 -->
    <div id="list" class="tab-content">
      <table id="recordsTable">
        <thead>
          <tr>
            <th>日付</th>
            <th>区分</th>
            <th>使い道</th>
            <th>取引先</th>
            <th>支払方法</th>
            <th>通貨</th>
            <th>外貨金額</th>
            <th>レート</th>
            <th>金額(円)</th>
            <th>メモ</th>
            <th>ファイル</th>
            <th>操作</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <!-- 集計 -->
    <div id="aggregate" class="tab-content">
      <h2>月次集計</h2>
      <div id="monthlySummary"></div>
      <h2>年次集計</h2>
      <div id="yearlySummary"></div>
    </div>
  </main>

  <!-- Google API -->
  <script async defer src="https://apis.google.com/js/api.js" onload="gapiLoaded()"></script>
  <script async defer src="https://accounts.google.com/gsi/client" onload="gisLoaded()"></script>
  <script src="script.js"></script>
</body>
</html>

